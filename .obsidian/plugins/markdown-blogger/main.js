/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBlogger
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var fs = __toESM(require("fs"));
var path = __toESM(require("path"));
var DEFAULT_SETTINGS = {
  projectFolder: ""
};
var MarkdownBlogger = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "validate-path-command",
      name: "Validate Path command",
      editorCallback: (editor, view) => {
        const { projectFolder } = this.settings;
        if (!fs.existsSync(projectFolder)) {
          new ErrorModal(this.app).open();
          return;
        }
        new import_obsidian.Notice(`Valid path: ${this.settings.projectFolder}`);
      }
    });
    this.addCommand({
      id: "push-md-command",
      name: "Push Markdown command",
      editorCallback: (editor, view) => {
        const { projectFolder } = this.settings;
        if (!fs.existsSync(projectFolder)) {
          new ErrorModal(this.app).open();
          return;
        }
        const text = editor.getDoc().getValue();
        const projectBlogPath = path.resolve(this.settings.projectFolder, view.file.name);
        try {
          fs.writeFileSync(`${projectBlogPath}`, text, { encoding: "utf8" });
          new import_obsidian.Notice(`Your file has been pushed! At ${projectBlogPath}`);
        } catch (err) {
          new import_obsidian.Notice(err.message);
        }
      }
    });
    this.addCommand({
      id: "pull-md-command",
      name: "Pull Markdown command",
      editorCheckCallback: (checking, editor, view) => {
        const projectBlogPath = path.resolve(this.settings.projectFolder, view.file.name);
        if (fs.existsSync(projectBlogPath)) {
          if (!checking) {
            try {
              const file = fs.readFileSync(projectBlogPath, "utf8");
              editor.getDoc().setValue(file);
            } catch (err) {
              new import_obsidian.Notice(err.message);
            }
          }
          return true;
        }
        return false;
      }
    });
    this.addSettingTab(new MarkdownBloggerSettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ErrorModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("The project folder does not exist. Please create the path or update the current path in Plugin Settings.");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var MarkdownBloggerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for Obsidian Markdown Blogger." });
    new import_obsidian.Setting(containerEl).setName("Local Project Folder Path").setDesc("The local project folder for your blog, portfolio, or static site. Must be an absolute path.").addText((text) => text.setPlaceholder("/Users/johnsample/projects/astro-blog/collections/").setValue(this.plugin.settings.projectFolder).onChange(async (value) => {
      this.plugin.settings.projectFolder = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmludGVyZmFjZSBNYXJrZG93bkJsb2dnZXJTZXR0aW5ncyB7XG5cdHByb2plY3RGb2xkZXI6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTWFya2Rvd25CbG9nZ2VyU2V0dGluZ3MgPSB7XG5cdHByb2plY3RGb2xkZXI6ICcnXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Rvd25CbG9nZ2VyIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE1hcmtkb3duQmxvZ2dlclNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAndmFsaWRhdGUtcGF0aC1jb21tYW5kJyxcblx0XHRcdG5hbWU6ICdWYWxpZGF0ZSBQYXRoIGNvbW1hbmQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCB7IHByb2plY3RGb2xkZXIgfSA9IHRoaXMuc2V0dGluZ3M7XG5cdFx0XHRcdGlmICghZnMuZXhpc3RzU3luYyhwcm9qZWN0Rm9sZGVyKSkge1xuXHRcdFx0XHRcdG5ldyBFcnJvck1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFZhbGlkIHBhdGg6ICR7dGhpcy5zZXR0aW5ncy5wcm9qZWN0Rm9sZGVyfWApO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3B1c2gtbWQtY29tbWFuZCcsXG5cdFx0XHRuYW1lOiAnUHVzaCBNYXJrZG93biBjb21tYW5kJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgeyBwcm9qZWN0Rm9sZGVyIH0gPSB0aGlzLnNldHRpbmdzO1xuXHRcdFx0XHRpZiAoIWZzLmV4aXN0c1N5bmMocHJvamVjdEZvbGRlcikpIHtcblx0XHRcdFx0XHRuZXcgRXJyb3JNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB0ZXh0ID0gZWRpdG9yLmdldERvYygpLmdldFZhbHVlKCk7XG5cdFx0XHRcdGNvbnN0IHByb2plY3RCbG9nUGF0aCA9IHBhdGgucmVzb2x2ZSh0aGlzLnNldHRpbmdzLnByb2plY3RGb2xkZXIsIHZpZXcuZmlsZS5uYW1lKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmcy53cml0ZUZpbGVTeW5jKGAke3Byb2plY3RCbG9nUGF0aH1gLCB0ZXh0LCB7ZW5jb2Rpbmc6ICd1dGY4J30pO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFlvdXIgZmlsZSBoYXMgYmVlbiBwdXNoZWQhIEF0ICR7cHJvamVjdEJsb2dQYXRofWApO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGVyci5tZXNzYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3B1bGwtbWQtY29tbWFuZCcsXG5cdFx0XHRuYW1lOiAnUHVsbCBNYXJrZG93biBjb21tYW5kJyxcblx0XHRcdGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRjb25zdCBwcm9qZWN0QmxvZ1BhdGggPSBwYXRoLnJlc29sdmUodGhpcy5zZXR0aW5ncy5wcm9qZWN0Rm9sZGVyLCB2aWV3LmZpbGUubmFtZSk7XG5cdFx0XHRcblx0XHRcdFx0aWYgKGZzLmV4aXN0c1N5bmMocHJvamVjdEJsb2dQYXRoKSkge1xuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSBmcy5yZWFkRmlsZVN5bmMocHJvamVjdEJsb2dQYXRoLCAndXRmOCcpO1xuXHRcdFx0XHRcdFx0XHRlZGl0b3IuZ2V0RG9jKCkuc2V0VmFsdWUoZmlsZSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShlcnIubWVzc2FnZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWFya2Rvd25CbG9nZ2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmNsYXNzIEVycm9yTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoXCJUaGUgcHJvamVjdCBmb2xkZXIgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBjcmVhdGUgdGhlIHBhdGggb3IgdXBkYXRlIHRoZSBjdXJyZW50IHBhdGggaW4gUGx1Z2luIFNldHRpbmdzLlwiKTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIE1hcmtkb3duQmxvZ2dlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNYXJrZG93bkJsb2dnZXI7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWFya2Rvd25CbG9nZ2VyKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1NldHRpbmdzIGZvciBPYnNpZGlhbiBNYXJrZG93biBCbG9nZ2VyLid9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0xvY2FsIFByb2plY3QgRm9sZGVyIFBhdGgnKVxuXHRcdFx0LnNldERlc2MoJ1RoZSBsb2NhbCBwcm9qZWN0IGZvbGRlciBmb3IgeW91ciBibG9nLCBwb3J0Zm9saW8sIG9yIHN0YXRpYyBzaXRlLiBNdXN0IGJlIGFuIGFic29sdXRlIHBhdGguJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJy9Vc2Vycy9qb2huc2FtcGxlL3Byb2plY3RzL2FzdHJvLWJsb2cvY29sbGVjdGlvbnMvJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3RGb2xkZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0Rm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBNEY7QUFDNUYsU0FBb0I7QUFDcEIsV0FBc0I7QUFNdEIsSUFBTSxtQkFBNEM7QUFBQSxFQUNqRCxlQUFlO0FBRWhCO0FBRUEsSUFBcUIsa0JBQXJCLGNBQTZDLHVCQUFPO0FBQUEsRUFHbkQsTUFBTSxTQUFTO0FBQ2QsVUFBTSxLQUFLLGFBQWE7QUFFeEIsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUV2RCxjQUFNLEVBQUUsY0FBYyxJQUFJLEtBQUs7QUFDL0IsWUFBSSxDQUFJLGNBQVcsYUFBYSxHQUFHO0FBQ2xDLGNBQUksV0FBVyxLQUFLLEdBQUcsRUFBRSxLQUFLO0FBQzlCO0FBQUEsUUFDRDtBQUNBLFlBQUksdUJBQU8sZUFBZSxLQUFLLFNBQVMsZUFBZTtBQUFBLE1BQ3hEO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEs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
